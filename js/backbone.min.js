/*! This file is auto-generated */
!function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],(function(i,n,s){e.Backbone=t(e,s,i,n)}));else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(i){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}((function(t,e,i,n){function s(t,e,n,r,o){var h,a=0;if(n&&"object"==typeof n){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(h=i.keys(n);a<h.length;a++)e=s(t,e,h[a],n[h[a]],o)}else if(n&&u.test(n))for(h=n.split(u);a<h.length;a++)e=t(e,h[a],r,o);else e=t(e,n,r,o);return e}function r(t,e,i){i=Math.min(Math.max(i,0),t.length);for(var n=Array(t.length-i),s=e.length,r=0;r<n.length;r++)n[r]=t[r+i];for(r=0;r<s;r++)t[r+i]=e[r];for(r=0;r<n.length;r++)t[r+s+i]=n[r]}function o(t,e,n,s){i.each(n,(function(i,n){e[n]&&(t.prototype[n]=function(t,e,i,n){switch(e){case 1:return function(){return t[i](this[n])};case 2:return function(e){return t[i](this[n],e)};case 3:return function(e,s){return t[i](this[n],P(e,this),s)};case 4:return function(e,s,r){return t[i](this[n],P(e,this),s,r)};default:return function(){var e=c.call(arguments);return e.unshift(this[n]),t[i].apply(t,e)}}}(e,i,n,s))}))}var h,a=t.Backbone,c=Array.prototype.slice,u=(n=(e.VERSION="1.4.1",e.$=n,e.noConflict=function(){return t.Backbone=a,this},e.emulateHTTP=!1,e.emulateJSON=!1,e.Events={}),/\s+/),l=(n.on=function(t,e,i){return this._events=s(l,this._events||{},t,e,{context:i,ctx:this,listening:h}),h&&(((this._listeners||(this._listeners={}))[h.id]=h).interop=!1),this},n.listenTo=function(t,e,n){if(t){var s=t._listenId||(t._listenId=i.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),o=h=r[s];r=(o||(this._listenId||(this._listenId=i.uniqueId("l")),o=h=r[s]=new m(this,t)),d(t,e,n,this));if(h=void 0,r)throw r;o.interop&&o.on(e,n)}return this},function(t,e,i,n){var s,r;return i&&(e=t[e]||(t[e]=[]),s=n.context,r=n.ctx,(n=n.listening)&&n.count++,e.push({callback:i,context:s,ctx:s||r,listening:n})),t}),d=function(t,e,i,n){try{t.on(e,i,n)}catch(t){return t}},f=(n.off=function(t,e,i){return this._events&&(this._events=s(f,this._events,t,e,{context:i,listeners:this._listeners})),this},n.stopListening=function(t,e,n){var s=this._listeningTo;if(s){for(var r=t?[t._listenId]:i.keys(s),o=0;o<r.length;o++){var h=s[r[o]];if(!h)break;h.obj.off(e,n,this),h.interop&&h.off(e,n)}i.isEmpty(s)&&(this._listeningTo=void 0)}return this},function(t,e,n,s){if(t){var r,o=s.context,h=s.listeners,a=0;if(e||o||n){for(r=e?[e]:i.keys(t);a<r.length;a++){var c=t[e=r[a]];if(!c)break;for(var u=[],l=0;l<c.length;l++){var d=c[l];n&&n!==d.callback&&n!==d.callback._callback||o&&o!==d.context?u.push(d):(d=d.listening)&&d.off(e,n)}u.length?t[e]=u:delete t[e]}return t}for(r=i.keys(h);a<r.length;a++)h[r[a]].cleanup()}}),p=(n.once=function(t,e,i){var n=s(p,{},t,e,this.off.bind(this));return this.on(n,e="string"==typeof t&&null==i?void 0:e,i)},n.listenToOnce=function(t,e,i){return e=s(p,{},e,i,this.stopListening.bind(this,t)),this.listenTo(t,e)},function(t,e,n,s){var r;return n&&((r=t[e]=i.once((function(){s(e,r),n.apply(this,arguments)})))._callback=n),t}),g=(n.trigger=function(t){if(this._events){for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];s(g,this._events,t,void 0,i)}return this},function(t,e,i,n){var s,r;return t&&(s=t[e],r=t.all,s&&(r=r&&r.slice()),s&&v(s,n),r)&&v(r,[e].concat(n)),t}),v=function(t,e){var i,n=-1,s=t.length,r=e[0],o=e[1],h=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o,h);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},m=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0},_=(m.prototype.on=n.on,m.prototype.off=function(t,e){(t=this.interop?(this._events=s(f,this._events,t,e,{context:void 0,listeners:void 0}),!this._events):(this.count--,0===this.count))&&this.cleanup()},m.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},n.bind=n.on,n.unbind=n.off,i.extend(e,n),e.Model=function(t,e){var n=t||{},s=(e=e||{},this.preinitialize.apply(this,arguments),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),i.result(this,"defaults"));n=i.defaults(i.extend({},s,n),s);this.set(n,e),this.changed={},this.initialize.apply(this,arguments)}),y=(i.extend(_.prototype,n,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null!=t){var s;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,!this._validate(s,n=n||{}))return!1;var r,o,h=n.unset,a=(t=n.silent,[]),c=this._changing,u=(this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),this.attributes),l=this.changed,d=this._previousAttributes;for(r in s)e=s[r],i.isEqual(u[r],e)||a.push(r),i.isEqual(d[r],e)?delete l[r]:l[r]=e,h?delete u[r]:u[r]=e;if(this.idAttribute in s&&(o=this.id,this.id=this.get(this.idAttribute),this.trigger("changeId",this,o,n)),!t){a.length&&(this._pending=n);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,u[a[f]],n)}if(!c){if(!t)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);this._pending=!1,this._changing=!1}}return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e,n={};for(e in this.attributes)n[e]=void 0;return this.set(n,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n,s=this._changing?this._previousAttributes:this.attributes,r={};for(n in t){var o=t[n];i.isEqual(s[n],o)||(r[n]=o,e=!0)}return!!e&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;if(!e.set(s,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},F(this,t),this.sync("read",this,t)},save:function(t,e,n){null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e;var s,r=(n=i.extend({validate:!0,parse:!0},n)).wait;if(s&&!r){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var o=this,h=n.success,a=this.attributes;"patch"!=(t=(n.success=function(t){o.attributes=a;var e=n.parse?o.parse(t,n):t;if((e=r?i.extend({},s,e):e)&&!o.set(e,n))return!1;h&&h.call(n.context,o,t,n),o.trigger("sync",o,t,n)},F(this,n),s&&r&&(this.attributes=i.extend({},a,s)),this.isNew()?"create":n.patch?"patch":"update"))||n.attrs||(n.attrs=s),e=this.sync(t,this,n);return this.attributes=a,e},destroy:function(t){function e(){n.stopListening(),n.trigger("destroy",n,n.collection,t)}t=t?i.clone(t):{};var n=this,s=t.success,r=t.wait,o=!(t.success=function(i){r&&e(),s&&s.call(t.context,n,i,t),n.isNew()||n.trigger("sync",n,i,t)});return this.isNew()?i.defer(t.success):(F(this,t),o=this.sync("delete",this,t)),r||e(),o},url:function(){var t,e=i.result(this,"urlRoot")||i.result(this.collection,"url")||q();return this.isNew()?e:(t=this.get(this.idAttribute),e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t))},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){return!e.validate||!this.validate||(t=i.extend({},this.attributes,t),!(t=this.validationError=this.validate(t,e)||null)||(this.trigger("invalid",this,t,i.extend(e,{validationError:t})),!1))}}),e.Collection=function(t,e){e=e||{},this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))}),b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},w=((S=(i.extend(y.prototype,n,{model:_,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,x))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice(),t=this._removeModels(t,e);return!e.silent&&t.length&&(e.changes={added:[],merged:[],removed:t},this.trigger("update",this,e)),n?t[0]:t},set:function(t,e){if(null!=t){(e=i.extend({},b,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);for(var n=!i.isArray(t),s=(t=n?[t]:t.slice(),e.at),o=((s=(s=null!=s?+s:s)>this.length?this.length:s)<0&&(s+=this.length+1),[]),h=[],a=[],c=[],u={},l=e.add,d=e.merge,f=e.remove,p=!1,g=this.comparator&&null==s&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null,m=0;m<t.length;m++){var _,y=t[m],x=this.get(y);x?(d&&y!==x&&(_=this._isModel(y)?y.attributes:y,e.parse&&(_=x.parse(_,e)),x.set(_,e),a.push(x),g)&&!p&&(p=x.hasChanged(v)),u[x.cid]||(u[x.cid]=!0,o.push(x)),t[m]=x):l&&(y=t[m]=this._prepareModel(y,e))&&(h.push(y),this._addReference(y,e),u[y.cid]=!0,o.push(y))}if(f){for(m=0;m<this.length;m++)u[(y=this.models[m]).cid]||c.push(y);c.length&&this._removeModels(c,e)}var w=!1;if(o.length&&!g&&l&&f?(w=this.length!==o.length||i.some(this.models,(function(t,e){return t!==o[e]})),this.models.length=0,r(this.models,o,0),this.length=this.models.length):h.length&&(g&&(p=!0),r(this.models,h,null==s?this.length:s),this.length=this.models.length),p&&this.sort({silent:!0}),!e.silent){for(m=0;m<h.length;m++)null!=s&&(e.index=s+m),(y=h[m]).trigger("add",y,this,e);(p||w)&&this.trigger("sort",this,e),(h.length||c.length||a.length)&&(e.changes={added:h,removed:c,merged:a},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return c.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t=t||{};var n=e.length;return i.isFunction(e)&&(e=e.bind(this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=i.extend({parse:!0},t)).success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){var n=(e=e?i.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var s=this,r=e.success;return e.success=function(t,e,i){n&&s.add(t,i),r&&r.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new w(this,E)},keys:function(){return new w(this,I)},entries:function(){return new w(this,k)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):(t=((e=e?i.clone(e):{}).collection=this).model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger("invalid",this,t.validationError,e),!1):t},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s,r,o=this.get(t[n]);o&&(s=this.indexOf(o),this.models.splice(s,1),this.length--,delete this._byId[o.cid],null!=(r=this.modelId(o.attributes,o.idAttribute))&&delete this._byId[r],e.silent||(e.index=s,o.trigger("remove",o,this,e)),i.push(o),this._removeReference(o,e))}return i},_isModel:function(t){return t instanceof _},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes,t.idAttribute);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes,t.idAttribute);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;var s,r;"destroy"===t&&this.remove(e,n),"changeId"===t&&(s=this.modelId(e.previousAttributes(),e.idAttribute),r=this.modelId(e.attributes,e.idAttribute),null!=s&&delete this._byId[s],null!=r)&&(this._byId[r]=e)}this.trigger.apply(this,arguments)}}),"function"==typeof Symbol&&Symbol.iterator))&&(y.prototype[S]=y.prototype.values),function(t,e){this._collection=t,this._kind=e,this._index=0}),E=1,I=2,k=3,S=(S&&(w.prototype[S]=function(){return this}),w.prototype.next=function(){if(this._collection){var t,e;if(this._index<this._collection.length)return t=this._collection.at(this._index),this._index++,{value:this._kind===E?t:(e=this._collection.modelId(t.attributes,t.idAttribute),this._kind===I?e:[e,t]),done:!1};this._collection=void 0}return{value:void 0,done:!0}},e.View=function(t){this.cid=i.uniqueId("view"),this.preinitialize.apply(this,arguments),i.extend(this,i.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)}),A=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"],P=(i.extend(S.prototype,n,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t=t||i.result(this,"events"))for(var e in this.undelegateEvents(),t){var n=t[e];(n=i.isFunction(n)?n:this[n])&&(e=e.match(A),this.delegate(e[1],e[2],n.bind(this)))}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){var t;this.el?this.setElement(i.result(this,"el")):(t=i.extend({},i.result(this,"attributes")),this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t))},_setAttributes:function(t){this.$el.attr(t)}}),function(t,e){var n;return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?(n=i.matches(t),function(t){return n(t.attributes)}):i.isString(t)?function(e){return e.get(t)}:t}),H=(i.each([[y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[_,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(t){var e=t[0],n=t[1],s=t[2];e.mixin=function(t){var n=i.reduce(i.functions(t),(function(t,e){return t[e]=0,t}),{});o(e,t,n,s)},o(e,i,n,s)})),e.sync=function(t,n,s){var r,o=H[t],h=(i.defaults(s=s||{},{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON}),{type:o,dataType:"json"}),a=(s.url||(h.url=i.result(n,"url")||q()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(h.contentType="application/json",h.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),!s.emulateHTTP||"PUT"!==o&&"DELETE"!==o&&"PATCH"!==o||(h.type="POST",s.emulateJSON&&(h.data._method=o),r=s.beforeSend,s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),r)return r.apply(this,arguments)}),"GET"===h.type||s.emulateJSON||(h.processData=!1),s.error);s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,a&&a.call(s.context,t,e,i)},t=s.xhr=e.ajax(i.extend(h,s));return n.trigger("request",n,t,s),t},{create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"}),$=(e.ajax=function(){return e.$.ajax.apply(e.$,arguments)},e.Router=function(t){t=t||{},this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)}),C=/\((.*?)\)/g,R=/(\(\?)?:\w+/g,M=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g,j=(i.extend($.prototype,n,{preinitialize:function(){},initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s=s||this[n];var r=this;return e.history.route(t,(function(i){i=r._extractParameters(t,i),!1!==r.execute(s,i,n)&&(r.trigger.apply(r,["route:"+n].concat(i)),r.trigger("route",n,i),e.history.trigger("route",r,n,i))})),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(N,"\\$&").replace(C,"(?:$1)?").replace(R,(function(t,e){return e?t:"([^/?]+)"})).replace(M,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,(function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null}))}}),e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)}),O=/^[#\/]|\s+$/g,U=/^\/+|\/+$/g,z=/#.*$/,q=(j.started=!1,i.extend(j.prototype,n,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){return(t=(t||this).location.href.match(/#(.*)$/))?t[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return(t=null==t?this._usePushState||!this._wantsHashChange?this.getPath():this.getHash():t).replace(O,"")},start:function(t){if(j.started)throw new Error("Backbone.history has already been started");if(j.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(U,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return t=this.root.slice(0,-1)||"/",this.location.replace(t+"#"+this.getPath()),!0;this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(this._hasHashChange||!this._wantsHashChange||this._usePushState||(this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1,(t=(t=document.body).insertBefore(this.iframe,t.firstChild).contentWindow).document.open(),t.document.close(),t.location.hash="#"+this.fragment),t=window.addEventListener||function(t,e){return attachEvent("on"+t,e)},this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?t("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),j.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if((e=e===this.fragment&&this.iframe?this.getHash(this.iframe.contentWindow):e)===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!j.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root,n=(i=(i=""!==t&&"?"!==t.charAt(0)?i:i.slice(0,-1)||"/")+t,t=t.replace(z,""),this.decodeFragment(t));if(this.fragment!==n){if(this.fragment=n,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)&&(n=this.iframe.contentWindow,e.replace||(n.document.open(),n.document.close()),this._updateHash(n.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){i?(i=t.href.replace(/(javascript:|#).*$/,""),t.replace(i+"#"+e)):t.hash="#"+e}}),e.history=new j,_.extend=y.extend=$.extend=S.extend=j.extend=function(t,e){var n=this,s=t&&i.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)};return i.extend(s,n,e),s.prototype=i.create(n.prototype,t),(s.prototype.constructor=s).__super__=n.prototype,s},function(){throw new Error('A "url" property or function must be specified')}),F=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}));